<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiques - ERPNext</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<body>
    
    <div class="container">
        <div th:replace="fragments/navbar :: navbar"></div>
        <div class="welcome-section">
            <p>Gérez vos salaires en toute simplicité</p>
            <form action="/getTotauxMensuels" method="get">
                <select name="moisFiltre" id="moisFiltre">
                    <option value="">-- Choisissez un mois --</option>
                    <option value="1">Janvier</option>
                    <option value="2">Février</option>
                    <option value="3">Mars</option>
                    <option value="4">Avril</option>
                    <option value="5">Mai</option>
                    <option value="6">Juin</option>
                    <option value="7">Juillet</option>
                    <option value="8">Août</option>
                    <option value="9">Septembre</option>
                    <option value="10">Octobre</option>
                    <option value="11">Novembre</option>
                    <option value="12">Décembre</option>
                </select>
                <input type="number" name="annee" placeholder="Année" value="2025">
                <input type="submit" value="Filtrer">
            </form>
        </div>
        

        <div class="card mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2>
                    <i class="fas fa-users"></i>
                    Statistiques
                </h2>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Mois</th>
                            <th>Brut (Gross Pay)</th>
                            <th>Déductions</th>
                            <th>Net à payer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tbody>
                            <tr th:each="entry : ${totalSalaire}">
                                <td th:text="${entry.key}">Janvier</td>
                                <td th:text="${#numbers.formatDecimal(entry.value.totalGross,0,'COMMA',2,'POINT')}">0.0</td>
                                <td th:text="${#numbers.formatDecimal(entry.value.totalDeduction,0,'COMMA',2,'POINT')}">0.0</td>
                                <td>
                                    <a th:href="@{'/salaryRegisterFiltre'(mois=${entry.value.moisNum}, annee=${entry.value.anneeNum})}"
                                    th:text="${#numbers.formatDecimal(entry.value.totalNet,0,'COMMA',2,'POINT')}">
                                        0.0
                                    </a>
                                                                
                                </td>                            
                            </tr>
                        </tbody>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-secondary">Besoin d'aide ?</p>
                    <h3 class="mb-4">Centre d'assistance</h3>
                </div>
                <a href="#" class="btn btn-primary">
                    <i class="fas fa-headset"></i>
                    Contacter le support
                </a>
            </div>
        </div>


    </div>

</body>
</html>